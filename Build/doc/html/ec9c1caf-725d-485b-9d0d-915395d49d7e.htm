<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><style type="text/css">.OH_CodeSnippetContainerTabLeftActive, .OH_CodeSnippetContainerTabLeft,.OH_CodeSnippetContainerTabLeftDisabled { }.OH_CodeSnippetContainerTabRightActive, .OH_CodeSnippetContainerTabRight,.OH_CodeSnippetContainerTabRightDisabled { }.OH_footer { }</style><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-en-US.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>ASP.NET Web Forms</title><meta name="Language" content="en-us" /><meta name="Microsoft.Help.Id" content="ec9c1caf-725d-485b-9d0d-915395d49d7e" /><meta name="Description" content="Implementing Known User request validation in ASP.NET Web Forms" /><meta name="Microsoft.Help.ContentType" content="How To" /><meta name="BrandingAware" content="true" /></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="OH_outerDiv"><div class="OH_outerContent"><table class="TitleTable"><tr><td class="OH_tdTitleColumn">ASP.NET Web Forms</td><td class="OH_tdRunningTitleColumn">QueueIT.Security Documentation</td></tr></table><div id="mainSection"><div id="mainBody"><span class="introStyle"></span><div class="introduction"><p>Implementing Known User request validation in ASP.NET Web Forms</p></div><div class="OH_CollapsibleAreaRegion" id="session"><div class="OH_regiontitle">Session Strategy</div><div class="OH_CollapsibleArea_HrDiv"><hr class="OH_CollapsibleArea_Hr" /></div></div><div class="OH_clear"> </div><p>
          The session implementation requires the code to route requests based on session state.
          If the user does not have a session and the Known User tokens are not included in the request
          the users must be redirected to the queue. If the Known User tokens are in the request they
          must be validated and a session must be created. The
          <a href="a31e4793-b02e-e032-8cf7-a21668556dab.htm">SessionValidationController</a> class
          is a helper class that simplifies the implementation of the queue validation by handling sessions
          and Known User validation as well as routing.
        </p><h3 class="procedureSubHeading">Using the Session Validation Controller to validate the request</h3><div class="subSection"><ol><li><p>Add a reference to the QueueIT.Security DLL.</p></li><li><p>
                  Implement one of the <a href="a31e4793-b02e-e032-8cf7-a21668556dab.htm">SessionValidationController</a>
                  factory methods to validate the request on all pages that is protected by the queue. 
                </p><div class="alert"><table><tr><th><img src="../icons/alert_caution.gif" alt="Important note" /> Important</th></tr><tr><td><p>Please be aware that this this implementation is not done on error handling pages (e.g. Error.aspx) which will cause users to get looped arround.</p></td></tr></table></div></li><li><p>
                  Optionally add <a href="f439359a-4f2d-4a71-9f66-5c77a7d04b89.htm">configuration section</a>.
                </p></li></ol></div><p>
          By default the <a href="a31e4793-b02e-e032-8cf7-a21668556dab.htm">SessionValidationController</a> uses <a href="bd7df010-14cd-9a75-37ac-cdf4643dc232.htm">CookieValidateResultRepository</a>.
          Use the Configure() method and the <a href="d21f5ee4-ed91-9c0a-ad85-32bf84364f16.htm">IValidateResultRepository</a> interface
          to implement a custom session provider. If you need more control please use
          <a href="3ff33990-9a3e-1094-a984-e09975a31517.htm">QueueFactory</a> and
          <a href="3e123a56-23b4-f63a-57aa-1a188534d2c6.htm">KnownUserFactory</a> and implement state and routing using custom logic.
        </p><div class="OH_CollapsibleAreaRegion" id="link"><div class="OH_regiontitle">Link Implementation Strategy</div><div class="OH_CollapsibleArea_HrDiv"><hr class="OH_CollapsibleArea_Hr" /></div></div><div class="OH_clear"> </div><div class="alert"><table><tr><th><img src="../icons/alert_caution.gif" alt="Important note" /> Important</th></tr><tr><td><p>Session strategy should be your first choice so only use Link strategy if for some reason Session strategy can't be applied</p></td></tr></table></div><p>Using the link implementation strategy the request on the queue target page requires verification</p><h3 class="procedureSubHeading">Using the Known User Factory to validate the request</h3><div class="subSection"><ol><li><p>Add a reference to the QueueIT.Security DLL.</p></li><li><p>
                  Implement one of the <a href="3e123a56-23b4-f63a-57aa-1a188534d2c6.htm">KnownUserFactory</a>
                  factory methods to validate the request on the queue target page.
                </p></li><li><p>
                  Optionally add <a href="f439359a-4f2d-4a71-9f66-5c77a7d04b89.htm">configuration section</a>.
                </p></li></ol></div></div></div></div></div><div id="OH_footer" class="OH_footer"><p>Copyright 2014 - Queue-it</p><div class="OH_feedbacklink">Send comments on this topic to
        <a id="HT_MailLink" href="mailto:support%40queue-it.net?Subject=QueueIT.Security Documentation">Queue-it</a></div><script type="text/javascript">
        var HT_mailLink = document.getElementById("HT_MailLink");
        var HT_mailLinkText = HT_mailLink.innerHTML;
        HT_mailLink.href += ": " + document.title + "\u0026body=" + encodeURIComponent("Your feedback is used to improve the documentation and the product. Your e-mail address will not be used for any other purpose and is disposed of after the issue you report is resolved. While working to resolve the issue that you report, you may be contacted via e-mail to get further details or clarification on the feedback you sent. After the issue you report has been addressed, you may receive an e-mail to let you know that your feedback has been addressed.");
        HT_mailLink.innerHTML = HT_mailLinkText;
        </script></div></body></html>