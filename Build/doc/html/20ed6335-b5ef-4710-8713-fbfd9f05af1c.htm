<html xmlns:MSHelp="http://msdn.microsoft.com/mshelp" xmlns:mshelp="http://msdn.microsoft.com/mshelp"><head><link rel="SHORTCUT ICON" href="./../icons/favicon.ico" /><style type="text/css">.OH_CodeSnippetContainerTabLeftActive, .OH_CodeSnippetContainerTabLeft,.OH_CodeSnippetContainerTabLeftDisabled { }.OH_CodeSnippetContainerTabRightActive, .OH_CodeSnippetContainerTabRight,.OH_CodeSnippetContainerTabRightDisabled { }.OH_footer { }</style><link rel="stylesheet" type="text/css" href="./../styles/branding.css" /><link rel="stylesheet" type="text/css" href="./../styles/branding-en-US.css" /><style type="text/css">
			body
			{
			border-left:5px solid #e6e6e6;
			overflow-x:scroll;
			overflow-y:scroll;
			}
		</style><script src="./../scripts/branding.js" type="text/javascript"><!----></script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>ASP.NET MVC</title><meta name="Language" content="en-us" /><meta name="Microsoft.Help.Id" content="20ed6335-b5ef-4710-8713-fbfd9f05af1c" /><meta name="Description" content="Implementing Known User request validation in ASP.NET MVC" /><meta name="Microsoft.Help.ContentType" content="How To" /><meta name="BrandingAware" content="'true'" /><meta name="SelfBranded" content="true" /></head><body onload="onLoad()" class="primary-mtps-offline-document"><div class="OH_outerDiv"><div class="OH_outerContent"><table class="TitleTable"><tr><td class="OH_tdTitleColumn">ASP.NET MVC</td><td class="OH_tdRunningTitleColumn">QueueIT.Security Documentation</td></tr></table><div id="mainSection"><div id="mainBody"><span class="introStyle"></span><div class="introduction"><p>Implementing Known User request validation in ASP.NET MVC</p></div><a id="session"><!----></a><div class="OH_CollapsibleAreaRegion"><div class="OH_regiontitle">Session Strategy</div><div class="OH_CollapsibleArea_HrDiv"><hr class="OH_CollapsibleArea_Hr" /></div></div><div class="OH_clear"></div><p>
          The session implementation requires the code to route requests based on session state.
          If the user does not have a session and the Known User tokens are not included in the request
          the users must be redirected to the queue. If the Known User tokens are in the request they
          must be validated and a session must be created. The
          <span sdata="cer" target="T:QueueIT.Security.Mvc.SessionValidationAttribute"><a href="087f754f-885d-f4f6-7b29-98f3adb78403.htm" target="">SessionValidationAttribute</a></span> class
          is a helper Action Filter that simplifies the implementation of the queue validation by handling sessions
          and Known User validation as well as routing.
        </p><h3 class="procedureSubHeading">Using the Session Validation Attribute to validate the request</h3><div class="subSection"><ol><li><p>Add a reference to the QueueIT.Security DLL.</p></li><li><p>Add a reference to the QueueIT.Security.Mvc DLL.</p></li><li><p>
                  Add the <span sdata="cer" target="T:QueueIT.Security.Mvc.SessionValidationAttribute"><a href="087f754f-885d-f4f6-7b29-98f3adb78403.htm" target="">SessionValidationAttribute</a></span>
                  Action Filter attribute to validate the request on all pages that is protected by the queue.
                </p><div class="alert"><table><tr><th><img class="mtps-img-src" src="./../icons/alert_caution.gif" alt="Important note" /> <strong>Important</strong></th></tr><tr><td>Please be aware that this filter is not applied to error controller actions or similar which will cause users to get looped arround.</td></tr></table></div></li><li><p>
                  Optionally add <a href="f439359a-4f2d-4a71-9f66-5c77a7d04b89.htm" target="">configuration section</a>.
                </p></li></ol></div><p>
          By default the <span sdata="cer" target="T:QueueIT.Security.SessionValidationController"><a href="a31e4793-b02e-e032-8cf7-a21668556dab.htm" target="">SessionValidationController</a></span> uses <span sdata="cer" target="T:QueueIT.Security.CookieValidateResultRepository"><a href="bd7df010-14cd-9a75-37ac-cdf4643dc232.htm" target="">CookieValidateResultRepository</a></span>.
          Use the Configure() method and the <span sdata="cer" target="T:QueueIT.Security.IValidateResultRepository"><a href="d21f5ee4-ed91-9c0a-ad85-32bf84364f16.htm" target="">IValidateResultRepository</a></span> interface
          to implement a custom session provider. If you need more control please use
          <span sdata="cer" target="T:QueueIT.Security.QueueFactory"><a href="3ff33990-9a3e-1094-a984-e09975a31517.htm" target="">QueueFactory</a></span> and
          <span sdata="cer" target="T:QueueIT.Security.KnownUserFactory"><a href="3e123a56-23b4-f63a-57aa-1a188534d2c6.htm" target="">KnownUserFactory</a></span> and implement state and routing using custom logic.
        </p><a id="link"><!----></a><div class="OH_CollapsibleAreaRegion"><div class="OH_regiontitle">Link Implementation Strategy</div><div class="OH_CollapsibleArea_HrDiv"><hr class="OH_CollapsibleArea_Hr" /></div></div><div class="OH_clear"></div><div class="alert"><table><tr><th><img class="mtps-img-src" src="./../icons/alert_caution.gif" alt="Important note" /> <strong>Important</strong></th></tr><tr><td>Session strategy should be your first choice so only use Link strategy if for some reason Session strategy can't be applied</td></tr></table></div><p>Using the link implementation strategy the request on the queue target page requires verification</p><h3 class="procedureSubHeading">Using the Known User Attribute to validate the request</h3><div class="subSection"><ol><li><p>Add a reference to the QueueIT.Security DLL.</p></li><li><p>Add a reference to the QueueIT.Security.Mvc DLL.</p></li><li><p>
                  Add the <span sdata="cer" target="T:QueueIT.Security.Mvc.KnownUserAttribute"><a href="b7a29d5b-6a3b-6ff5-93b6-29923946f038.htm" target="">KnownUserAttribute</a></span>
                  Action Filter attribute to validate the request on the queue target controller action.
                </p></li><li><p>
                  Optionally add <a href="f439359a-4f2d-4a71-9f66-5c77a7d04b89.htm" target="">configuration section</a>.
                </p></li></ol></div></div></div></div></div><div id="OH_footer" class="OH_footer"><p>Copyright 2014 - Queue-it</p><div class="OH_feedbacklink"><a href="mailto:support@queue-it.net?subject=QueueIT.Security+Documentation+ASP.NET+MVC+100+EN-US&amp;body=Your%20feedback%20is%20used%20to%20improve%20the%20documentation%20and%20the%20product.%20Your%20e-mail%20address%20will%20not%20be%20used%20for%20any%20other%20purpose%20and%20is%20disposed%20of%20after%20the%20issue%20you%20report%20is%20resolved.%20While%20working%20to%20resolve%20the%20issue%20that%20you%20report%2c%20you%20may%20be%20contacted%20via%20e-mail%20to%20get%20further%20details%20or%20clarification%20on%20the%20feedback%20you%20sent.%20After%20the%20issue%20you%20report%20has%20been%20addressed%2c%20you%20may%20receive%20an%20e-mail%20to%20let%20you%20know%20that%20your%20feedback%20has%20been%20addressed.">Send Feedback</a> on this topic to Queue-it.</div></div></body></html>